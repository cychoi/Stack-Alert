<style>

body {
    font-family: arial, helvetica, sans;
}

a {
    text-decoration: none;
    color: #333;
}

a:hover {
    text-decoration: underline;
    color: #000;
}

.auth {
    width: 260px;
    height: 80px;
}

.auth button {
    width: 100%;
}

.contents {
    width: 400px;
    padding-left: 0px;
}

.contents li {
    list-style-type: none;
    padding: 4px 8px;
}

.contents li.even {
    background-color: #eee;
}

.contents li .title {
    font-size: 10pt;
    display: block;
    font-weight: bold;
}

.contents li .body {
    font-size: 9pt;
}

</style>

<script src="stackapi.js"></script>
<script>

function Authorize() {
    
    StackAPI.BeginImplicitAuth(chrome.extension.getURL('auth_complete.html'));
    
}

// This page contains either the button to begin authorizing the application
// or the current inbox items - or of course, an error if one occurred.
if(localStorage.getItem('access_token') === null) {
    
    document.write('<div class="auth"><p>You need to authorize StackAlert to access your account.</p><button onclick="Authorize();">Authorize Now</button></div>');
    
} else {
    
    // Retrieves the inbox items from the last time we synched with
    // the API. This data is stored using HTML5 localStorage
    var inbox_items = localStorage.getItem('inbox_contents');
    
    if(inbox_items === null)
        document.write('There is currently no inbox data stored.');
    else {
        
        inbox_items = JSON.parse(inbox_items);
        
        // Create the list that will contain the inbox items
        var list_contents = '<h3>Your Inbox:</h3><ul class="contents">';
        
        var odd = false;
        for(var i=0;i<inbox_items.length;++i) {
            list_contents += '<li class="' + (odd?'odd':'even') + '"><a href="' + inbox_items[i]['link'] + '" target="_blank"><span class="title">' + inbox_items[i]['title'] + '</span><span class="body">' + inbox_items[i]['body'] + '</span></a></li>';
            odd = !odd;
        }
        
        list_contents += '</ul>';
        
        document.write(list_contents);
    }
}

</script>